# Javascript Object

## 객체

### 객체의 선언

1. `객체(object)`는 키로 구분된 데이터 집합이나 복잡한 개체를 저장할 수 있는 자료형이다.
2. 객체는 객체 생성자 `new Object()`를 이용해서 선언할 수 있다.
3. 객체는 중괄호 `{}`를 이용한 객체 리터럴(object literal) 방식으로도 선언할 수 있다.
    ```js
    let user = new Object(); // '객체 생성자' 문법
    let user = {}; // '객체 리터럴' 문법
    ```
4. 객체를 const로 선언했더라도 객체 안의 프로퍼티는 수정할 수 있다. 단, 객체 자체를 새로운 값으로 덮으려고 하면 에러가 발생한다.

### 객체 리터럴과 프로퍼티

1. 객체 프로퍼티는 `key`와 `value`로 이루어져 있다.
2. 점 표기법 `object.key`을 이용하면 프로퍼티의 값을 읽을 수 있다.
3. 여러 단어를 조합하여 key값을 선언할 수 있다. 이때 key값을 참조하기 위해 대괄호 표기법 `obj.["key"]`을 사용한다.

    ```js
    let user = {};

    // set
    user["likes birds"] = true;

    // get
    alert(user["likes birds"]); // true

    // delete
    delete user["likes birds"];
    ```

4. 대괄호 표기법을 사용하면 변수값을 받아 key값으로 사용할 수 있다. 그러나, 점 표기법은 이러한 방식이 불가능하다.

### 객체와 연산자

1. 프로퍼티 값을 매개변수로 받아 사용하는 경우, `프로퍼티 값 단축 구문`을 사용하여 코드를 짧게 줄일 수 있다.
    ```js
    function makeUser(name, age) {
    	return {
    		name, // name: name 과 같음
    		age, // age: age 와 같음
    		// ...
    	};
    }
    ```
2. 연산자 `in`을 활용하여 프로퍼티 존재 여부를 확인할 수 있다.
    ```js
    "key" in object;
    ```

---

## 객체 순회

1. `Object.keys(obj)` : 객체의 키만 담은 배열을 반환한다.
2. `Object.values(obj)` : 객체의 값만 담은 배열을 반환한다.
3. `Object.entries(obj)` : [키, 값] 쌍을 담은 배열을 반환한다.
4. obj.values()가 아닌 Object.values(obj) 형태를 사용하는 이유는 유연성 떄문이다.
   </br> 객체가 순회 메서드와 동일한 이름의 내부 메소드를 가진 경우에도 두 메서드가 모두 사용될 수 있게 하기 위함이다.

---

## 객체 참조

### 참조와 객체 복사

1. 객체는 `참조에 의해(by reference)` 저장되고 복사된다.
    - 원시 값 : 변수에 값이 그대로 저장・할당됨 → 각 변수에 독립적으로 저장됨, 값을 수정하더라도 변수에 할당된 값이 변함.
    - 객체 : 변수에 객체에 대한 참조 값이 저장됨 → 하나의 객체의 주소를 여러 변수가 참조함, 한 변수에서 값을 수정하면 다른 변수의 값에도 영향을 미침.
2. 기존에 있는 객체와 똑같으면서 독립적인 객체를 하는 방법은 다음과 같다.
    - 새로운 객체를 선언하고, 기존 객체에서 for문을 돌며 값을 새로운 객체에 넣어준다.
    - `Object.assign(dest, [src1, src2, src3...])`를 사용하여 객체를 복사한다.
3. 객체 안의 프로퍼티가 객체인 경우, 객체를 복제하려면 `깊은 복사`를 이용해야 한다. 얕은 복사는 중첩 객체를 처리할 수 없다.

### 도달 가능성과 가비지 컬렉션

1. 자바스크립트 엔진은 메모리 정리를 위한 `가비지 컬렉터`가 동작한다.
2. 가비지 컬렉터의 삭제 기준은 `도달 가능성(reachability)`이다.
3. 객체를 참조했던 변수가 모두 사라져서 더이상 객체에 접근할 수 없어지면, 객체는 삭제된다.
4. 객체가 삭제될 때, 객제에 저장된 프로퍼티 역시 메모리에서 사라진다.

---

## 객체 내부 접근

### 메서드와 this

1. 객체는 프로퍼티로 함수를 가질 수 있다. 이떄 객체가 프로퍼티로 가지는 함수를 메서드라고 한다.

    ```js
    user = {
    	sayHi: function () {
    		alert("Hello");
    	},
    };

    // 단축 구문을 사용하니 더 깔끔해 보이네요.
    user = {
    	sayHi() {
    		// "sayHi: function()"과 동일합니다.
    		alert("Hello");
    	},
    };
    ```

2. 메서드가 객체의 다른 프로퍼티 값을 활용할 때는 `this` 키워드를 사용한다.
3. `this`값은 호출 시에 결정된다
    - 동일한 함수이더라도 참조하는 객체가 달라지면 this의 값이 달라진다.
    - 화살표 함수에서 this를 참조하면, 화살표 함수가 아닌 외부 함수의 this를 가져온다.

### new 연산자와 생성자 함수

1. 생성자 함수는 아래 두 관례를 따른다.
    - 대문자로 시작하는 함수명을 가진다.
    - `new` 연산자를 붙여 실행한다.
2. 생성자 함수가 실행되면 다음 순서를 따른다.
    - 빈 객체를 만들어 this에 할당한다.
    - 함수 본문을 실행하며 this에 새로운 프로퍼티를 추가한다.
    - this를 반환한다.
3. 생성자 함수의 의의는 재사용할 수 있는 객체 생성 코드를 만드는 데에 있다.
4. 익명 생성자 함수를 사용하면 재사용은 막으면서 코드를 캡슐화할 수 있다.
5. 생성자 함수에 `return`문이 사용된다면 다음 반환 규칙을 따른다.
    - 반환할 값이 객체이면 return문의 객체가 반환된다.
    - 반환할 값이 원시값이면 return문이 무시되고 this가 반환된다.
